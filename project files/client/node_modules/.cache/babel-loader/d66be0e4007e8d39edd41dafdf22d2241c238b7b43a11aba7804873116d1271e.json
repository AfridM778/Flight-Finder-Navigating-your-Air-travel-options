{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AFRID\\\\Flight-Booking-App-MERN\\\\client\\\\src\\\\context\\\\GeneralContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const GeneralContext = /*#__PURE__*/createContext();\nconst GeneralContextProvider = ({\n  children\n}) => {\n  _s();\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [usertype, setUsertype] = useState('');\n  const [ticketBookingDate, setTicketBookingDate] = useState(null);\n  const navigate = useNavigate();\n  const login = async () => {\n    try {\n      const loginInputs = {\n        email,\n        password\n      };\n      const res = await axios.post('http://localhost:6001/login', loginInputs);\n\n      // Save user info to localStorage\n      localStorage.setItem('userId', res.data._id);\n      localStorage.setItem('userType', res.data.usertype);\n      localStorage.setItem('username', res.data.username);\n      localStorage.setItem('email', res.data.email);\n\n      // Navigate based on user type\n      switch (res.data.usertype) {\n        case 'customer':\n          navigate('/');\n          break;\n        case 'admin':\n          navigate('/admin');\n          break;\n        case 'flight-operator':\n          navigate('/flight-admin');\n          break;\n        default:\n          navigate('/');\n      }\n    } catch (err) {\n      console.error('Login failed:', err);\n      alert('Login failed!');\n    }\n  };\n  const register = async () => {\n    try {\n      const inputs = {\n        username,\n        email,\n        usertype,\n        password\n      };\n      const res = await axios.post('http://localhost:6001/register', inputs);\n\n      // Save user info to localStorage\n      localStorage.setItem('userId', res.data._id);\n      localStorage.setItem('userType', res.data.usertype);\n      localStorage.setItem('username', res.data.username);\n      localStorage.setItem('email', res.data.email);\n\n      // Navigate based on user type\n      switch (res.data.usertype) {\n        case 'customer':\n          navigate('/');\n          break;\n        case 'admin':\n          navigate('/admin');\n          break;\n        case 'flight-operator':\n          navigate('/flight-admin');\n          break;\n        default:\n          navigate('/');\n      }\n    } catch (err) {\n      console.error('Registration failed:', err);\n      alert('Registration failed!');\n    }\n  };\n  const logout = () => {\n    localStorage.clear();\n    navigate('/');\n  };\n  return /*#__PURE__*/_jsxDEV(GeneralContext.Provider, {\n    value: {\n      login,\n      register,\n      logout,\n      username,\n      setUsername,\n      email,\n      setEmail,\n      password,\n      setPassword,\n      usertype,\n      setUsertype,\n      ticketBookingDate,\n      setTicketBookingDate\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_s(GeneralContextProvider, \"tqqG4MJlQTaX1x8L0hLBw4zHkCE=\", false, function () {\n  return [useNavigate];\n});\n_c = GeneralContextProvider;\nexport default GeneralContextProvider;\nvar _c;\n$RefreshReg$(_c, \"GeneralContextProvider\");","map":{"version":3,"names":["React","createContext","useState","axios","useNavigate","jsxDEV","_jsxDEV","GeneralContext","GeneralContextProvider","children","_s","username","setUsername","email","setEmail","password","setPassword","usertype","setUsertype","ticketBookingDate","setTicketBookingDate","navigate","login","loginInputs","res","post","localStorage","setItem","data","_id","err","console","error","alert","register","inputs","logout","clear","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/AFRID/Flight-Booking-App-MERN/client/src/context/GeneralContext.jsx"],"sourcesContent":["import React, { createContext, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport const GeneralContext = createContext();\r\n\r\nconst GeneralContextProvider = ({ children }) => {\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [usertype, setUsertype] = useState('');\r\n  const [ticketBookingDate, setTicketBookingDate] = useState(null);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const login = async () => {\r\n    try {\r\n      const loginInputs = { email, password };\r\n\r\n      const res = await axios.post('http://localhost:6001/login', loginInputs);\r\n\r\n      // Save user info to localStorage\r\n      localStorage.setItem('userId', res.data._id);\r\n      localStorage.setItem('userType', res.data.usertype);\r\n      localStorage.setItem('username', res.data.username);\r\n      localStorage.setItem('email', res.data.email);\r\n\r\n      // Navigate based on user type\r\n      switch (res.data.usertype) {\r\n        case 'customer':\r\n          navigate('/');\r\n          break;\r\n        case 'admin':\r\n          navigate('/admin');\r\n          break;\r\n        case 'flight-operator':\r\n          navigate('/flight-admin');\r\n          break;\r\n        default:\r\n          navigate('/');\r\n      }\r\n    } catch (err) {\r\n      console.error('Login failed:', err);\r\n      alert('Login failed!');\r\n    }\r\n  };\r\n\r\n  const register = async () => {\r\n    try {\r\n      const inputs = { username, email, usertype, password };\r\n\r\n      const res = await axios.post('http://localhost:6001/register', inputs);\r\n\r\n      // Save user info to localStorage\r\n      localStorage.setItem('userId', res.data._id);\r\n      localStorage.setItem('userType', res.data.usertype);\r\n      localStorage.setItem('username', res.data.username);\r\n      localStorage.setItem('email', res.data.email);\r\n\r\n      // Navigate based on user type\r\n      switch (res.data.usertype) {\r\n        case 'customer':\r\n          navigate('/');\r\n          break;\r\n        case 'admin':\r\n          navigate('/admin');\r\n          break;\r\n        case 'flight-operator':\r\n          navigate('/flight-admin');\r\n          break;\r\n        default:\r\n          navigate('/');\r\n      }\r\n    } catch (err) {\r\n      console.error('Registration failed:', err);\r\n      alert('Registration failed!');\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.clear();\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <GeneralContext.Provider\r\n      value={{\r\n        login,\r\n        register,\r\n        logout,\r\n        username,\r\n        setUsername,\r\n        email,\r\n        setEmail,\r\n        password,\r\n        setPassword,\r\n        usertype,\r\n        setUsertype,\r\n        ticketBookingDate,\r\n        setTicketBookingDate,\r\n      }}\r\n    >\r\n      {children}\r\n    </GeneralContext.Provider>\r\n  );\r\n};\r\n\r\nexport default GeneralContextProvider;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}